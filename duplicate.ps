%!PS

/duplicate 
{
	1 dict begin

		count 2 gt 
		{
			/value exch def
			
			count
			{
				dup
				value eq
				{
					dup
					count 2 roll	
				}
				{
					count 1 roll
				}
				ifelse
				
			}
			repeat
			
			
		}
		{
			count 1 eq
			{
				pop
			}
			if
		}
		ifelse
	
	end
	
} 
def
